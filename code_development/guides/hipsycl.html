

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>What is SYCL? &mdash; Sigma2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=9edc463e" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../../_static/nris.css?v=69e7a171" />
      <link rel="stylesheet" type="text/css" href="../../_static/universal-navbar.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/statuspal.css" />

  
    <link rel="shortcut icon" href="../../_static/nris.ico"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=f281be69"></script>
      <script async="async" src="https://siteimproveanalytics.com/js/siteanalyze_6036825.js"></script>
      <script src="../../_static/design-tabs.js?v=f930bc37"></script>
      <script src="../../_static/statuspal_widget.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">
<!-- Send url to parent when displayed as iframe -->
<script>
    const valid_orign_url = "https://www.sigma2.no"
    window.addEventListener('message', function(event) {
        if (event.data === 'getDocumentationIframeUrl' && event.origin.startsWith(valid_orign_url)) {
            // path only (/path/example.html)
            const path = window.location.pathname
            // query string (including the initial ? symbol)
            const search = window.location.search
            // Returns the hash (including the initial # symbol)
            const hash = window.location.hash
            const newUrl = path + search + hash;
            event.source.postMessage(newUrl, event.origin)
        }
    })

</script>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Sigma2/NRIS documentation
              <img src="../../_static/NRIS Logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Policies</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../code-of-conduct.html">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.sigma2.no/acceptable-use-policy">User Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/security-policy.html">Security policy for Sigma2 infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/sharing_files.html">Data handling and storage policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/licenses.html">Licence and access policies</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.sigma2.no/data-policy">Data Policy</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.sigma2.no/data-decommissioning-policies">Data decommissioning policies</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.sigma2.no/central-data-library-policy">Central Data Library Policy</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.sigma2.no/policies">Overview of Sigma2 Policies</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting help</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/support_line.html">Getting help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/extended_support.html">Extended support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/faq.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/how_to_write_good_support_requests.html">Writing good support requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/qa-sessions.html">Open Question &amp; Answer Sessions for All Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/lost_forgotten_password.html">Lost, expiring or changing passwords</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/two_factor_authentication.html">One-time-pad (OTP) / Two-factor authentication</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.sigma2.no/project-leader-handbook">Project Leader Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Training</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../training/events.html">Training events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training/notes_qa.html">Questions, Answers and Feedbacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training/videos.html">Training Video Archives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training/short_instructions.html">Short Instructions Video Archives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training/material.html">Training materials</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/opslog.html">Status and maintenance of systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/applying_account.html">How do I get an account?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/applying_resources.html">Applying for computing and storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/file_transfer.html">File transfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/editing_files.html">Editing files</a></li>
<li class="toctree-l1"><a class="reference internal" href="vs_code/connect_to_server.html">Connecting to a system with Visual Studio Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/ssh.html">SSH</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/ssh.html#common-ssh-errors">Common SSH errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/ood.html">Open OnDemand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/R.html">First R calculation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data and Storage Services</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/nird/nird_dp.html">NIRD Data Peak</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/nird/nird_dl.html">NIRD Data Lake</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/nird/backup_lmd.html">NIRD Backup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/nird/cdl.html">(NIRD) Central Data Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nird_archive/user-guide.html">NIRD Research Data Archive (NIRD RDA)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nird_service_platform/overview_nird_service_platform.html">NIRD Service Platform</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Storage Resources and Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/nird_lmd.html">NIRD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/clusters.html">Storage areas on HPC clusters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/quota.html">Storage quota</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/backup.html">Backup on Betzy, Saga, and NIRD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/performance.html">Optimizing storage performance</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">HPC usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/migration2metacenter.html">Migration to an NRIS HPC machine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../computing/responsible-use.html">Using shared resources responsibly</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jobs/overview.html">Running jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jobs/internet-login-compute-nodes.html">Login nodes:</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jobs/internet-login-compute-nodes.html#compute-nodes">Compute nodes:</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../computing/tuning-applications.html">Tuning applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides_llm.html">Running LLM Models in a Cluster Environment</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Compute resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/hardware_overview.html">Overview over our machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/betzy.html">Betzy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/olivia.html">Olivia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/saga.html">Saga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/lumi.html">LUMI</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../software/modulescheme.html">Software module scheme</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/installed_software.html">Installed software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/userinstallsw.html">Installing software as user</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/appguides.html">Application guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/eessi.html">EESSI</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tools and Additional services</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../nird_toolkit/overview.html">NIRD Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/course_resources.html">CRaaS - Course Resources as a Service</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Code development and tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Code development and tutorials</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Sigma2/NRIS documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">What is SYCL?</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="what-is-sycl">
<span id="sycl"></span><h1>What is SYCL?<a class="headerlink" href="#what-is-sycl" title="Link to this heading"></a></h1>
<blockquote>
<div><p><a class="reference external" href="https://www.khronos.org/sycl/">SYCL</a> is a higher-level programming model to improve programming
productivity on various hardware accelerators. It is a single-source domain-specific embedded
language based on pure C++17. It is a standard developed by Khronos Group, announced in March 2014.</p>
<blockquote>
<div><blockquote>
<div><blockquote>
<div><blockquote>
<div><blockquote>
<div><blockquote>
<div><blockquote>
<div><blockquote>
<div><blockquote>
<div><blockquote>
<div><blockquote>
<div><blockquote>
<div><blockquote>
<div><blockquote>
<div><blockquote>
<div><blockquote>
<div><blockquote>
<div><blockquote>
<div><p>—<a class="reference external" href="https://en.wikipedia.org/wiki/SYCL"><em>Wikipedia</em></a></p>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
<section id="what-is-hipsycl">
<span id="hipsycl"></span><h2>What is hipSYCL?<a class="headerlink" href="#what-is-hipsycl" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/illuhad/hipSYCL">hipSYCL</a> is one of a few currently available implementations
of the SYCL standard (none of which is feature complete wrt SYCL-2020 at the time of writing).
hipSYCL provides backends for offloading to OpenMP (any type of CPU), CUDA (Nvidia GPUs) and
HIP/ROCm (AMD GPUs), as well as experimental support for Level Zero (Intel GPUs). This particular
SYCL implementation is interesting for us at NRIS because it provides a unified tool for all our
current hardware, which constitutes Intel and AMD CPUs, Nvidia GPUs on Saga and Betzy and AMD GPUs
on LUMI. Other available SYCL implementations are <a class="reference external" href="https://developer.codeplay.com/home/">Codeplay</a>’s
ComputeCpp and <a class="reference external" href="https://software.intel.com/content/www/us/en/develop/tools/oneapi.html">Intel oneAPI</a>’s
DPC++, which are currently more geared towards Intel hardware (CPUs, GPUs and FPGAs).</p>
</section>
</section>
<section id="getting-started-with-hipsycl">
<span id="hipsycl-start"></span><h1>Getting started with hipSYCL<a class="headerlink" href="#getting-started-with-hipsycl" title="Link to this heading"></a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In this tutorial we will use the global installation of hipSYCL on Saga.
If you want to use another SYCL implementation or you need to install it
on a different machine, please refer to the installation instructions in the
<a class="reference external" href="https://github.com/codeplaysoftware/syclacademy">SYCL Academy</a> documentation.</p>
</div>
<section id="hello-world-example">
<h2>Hello world example<a class="headerlink" href="#hello-world-example" title="Link to this heading"></a></h2>
<p>This example demonstrates:</p>
<ol class="arabic simple">
<li><p>how to compile a minimal SYCL application using the global hipSYCL installation on Saga</p></li>
<li><p>how to compile for different target architectures</p></li>
<li><p>how to run the example on a GPU node on Saga</p></li>
</ol>
<p>In this example we will write a very simple program that queries the system for information
about which device it runs on. We will then compile the code for both CPU and (Nvidia) GPU
targets, and verify that it is able to find both devices. This can be achieved with
just a few lines of code:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;SYCL/sycl.hpp&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="o">**</span><span class="w"> </span><span class="n">argv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">Q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sycl</span><span class="o">::</span><span class="n">queue</span><span class="p">{</span><span class="n">sycl</span><span class="o">::</span><span class="n">default_selector</span><span class="p">{}};</span>

<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Chosen device: &quot;</span>
<span class="w">            </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">Q</span><span class="p">.</span><span class="n">get_device</span><span class="p">().</span><span class="n">get_info</span><span class="o">&lt;</span><span class="n">sycl</span><span class="o">::</span><span class="n">info</span><span class="o">::</span><span class="n">device</span><span class="o">::</span><span class="n">name</span><span class="o">&gt;</span><span class="p">()</span>
<span class="w">            </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">EXIT_SUCCESS</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Here we first include the main SYCL header file, which in our case will be provided by the
<code class="docutils literal notranslate"><span class="pre">hipSYCL</span></code> module on Saga. In the main function we simply initialize a <code class="docutils literal notranslate"><span class="pre">sycl::queue</span></code> using the
so-called <code class="docutils literal notranslate"><span class="pre">default_selector</span></code>, and then we print out which device was picked up for this particular
queue (more on queues later). The <code class="docutils literal notranslate"><span class="pre">default_selector</span></code> will choose an accelerator if one is found
on the host, otherwise it will fall back to run as (traditional) OpenMP on the host CPU.
By specifying different types of <code class="docutils literal notranslate"><span class="pre">selectors</span></code> it is possible to e.g. force the code to always
run on the CPU, or to choose a particular device if more than one accelerator is available.</p>
<section id="compiling-for-cpus">
<h3>Compiling for CPUs<a class="headerlink" href="#compiling-for-cpus" title="Link to this heading"></a></h3>
<p>In order to compile the code we need to have a SYCL implementation available, which we will
get by loading the <code class="docutils literal notranslate"><span class="pre">hipSYCL</span></code> module on Saga (check with <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">avail</span> <span class="pre">hipsycl</span></code> to see which
versions are currently available):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[me@login-1.SAGA ~]$ </span>module<span class="w"> </span>load<span class="w"> </span>hipSYCL/0.9.1-gcccuda-2020b
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want to compile for Nvidia GPUs you need a <code class="docutils literal notranslate"><span class="pre">gcccuda</span></code> version of <code class="docutils literal notranslate"><span class="pre">hipSYCL</span></code>.
With EasyBuild there exists also a CPU-only version based on the <code class="docutils literal notranslate"><span class="pre">GCC</span></code> toolchain without
the CUDA backend (and hopefully soon a ROCm version for targeting AMD GPUs).</p>
</div>
<p>After loading the <code class="docutils literal notranslate"><span class="pre">hipSYCL</span></code> module you should have the <code class="docutils literal notranslate"><span class="pre">syclcc</span></code> compiler wrapper available
on your command line (try e.g. <code class="docutils literal notranslate"><span class="pre">syclcc</span> <span class="pre">--help</span></code>). We will first compile the code only for
CPU by specifying the <code class="docutils literal notranslate"><span class="pre">omp</span></code> target:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[me@login-1.SAGA ~]$ </span>syclcc<span class="w"> </span>--hipsycl-targets<span class="o">=</span>omp<span class="w"> </span>-O3<span class="w"> </span>-o<span class="w"> </span>hello_world<span class="w"> </span>hello_world.cpp
</pre></div>
</div>
<p>This step should hopefully pass without any errors or warnings. If we run the resulting
executable on the login node we will however see a warning:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[me@login-1.SAGA ~]$ </span>./hello_world
<span class="go">[hipSYCL Warning] backend_loader: Could not load backend plugin: /cluster/software/hipSYCL/0.9.1-gcccuda-2020b/bin/../lib/hipSYCL/librt-backend-cuda.so</span>
<span class="go">[hipSYCL Warning] libcuda.so.1: cannot open shared object file: No such file or directory</span>
<span class="go">Chosen device: hipSYCL OpenMP host device</span>
</pre></div>
</div>
<p>The reason for the warning is that we use a <code class="docutils literal notranslate"><span class="pre">hipSYCL</span></code> version that is compiled with the
CUDA backend, but we don’t have the CUDA drivers available when we run the program on the
login nodes. But no worries, the last line that is printed is the actual output of our
program, which tells us that the code was executed on the OpenMP (CPU) host device, which
is exactly as expected since (1) we don’t have any accelerator available on the login node
and (2) we only compiled a CPU target for the code. This means that if you run the same
binary on one of the GPU nodes, you will no longer see the <code class="docutils literal notranslate"><span class="pre">[hipSYCL</span> <span class="pre">Warning]</span></code> (since
CUDA drivers are now available), but you will still get the same program output <code class="docutils literal notranslate"><span class="pre">Chosen</span> <span class="pre">device:</span> <span class="pre">hipSYCL</span> <span class="pre">OpenMP</span> <span class="pre">host</span> <span class="pre">device</span></code> (since the code is still only compiled for CPU targets).</p>
</section>
<section id="compiling-for-nvidia-gpus">
<h3>Compiling for Nvidia GPUs<a class="headerlink" href="#compiling-for-nvidia-gpus" title="Link to this heading"></a></h3>
<p>The only thing we need to change when compiling for GPUs is to add new target options to
the compiler string. The only complicating issue here might be to figure out which target
architecture corresponds to the hardware at hand, but for the P100 GPUs on Saga the
name of the target should be <code class="docutils literal notranslate"><span class="pre">cuda:sm_60</span></code> (<code class="docutils literal notranslate"><span class="pre">cuda:sm_80</span></code> for Betzy’s A100 cards):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[me@login-1.SAGA ~]$ </span>syclcc<span class="w"> </span>--hipsycl-targets<span class="o">=</span><span class="s1">&#39;omp;cuda:sm_60&#39;</span><span class="w"> </span>-O3<span class="w"> </span>-o<span class="w"> </span>hello_world<span class="w"> </span>hello_world.cpp
<span class="go">clang-11: warning: Unknown CUDA version. cuda.h: CUDA_VERSION=11010. Assuming the latest supported version 10.1 [-Wunknown-cuda-version]</span>
</pre></div>
</div>
<p>CUDA drivers is <em>not</em> a prerequisite for compiling the CUDA target, so this can be done on
the login node. We see that we get a <code class="docutils literal notranslate"><span class="pre">Clang</span></code> warning due to the CUDA version, but this does
not seem to be a problem. The resulting executable can still be run on a pure CPU host (e.g.
the login node) with the same result as before:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[me@login-1.SAGA ~]$ </span>./hello_world
<span class="go">[hipSYCL Warning] backend_loader: Could not load backend plugin: /cluster/software/hipSYCL/0.9.1-gcccuda-2020b/bin/../lib/hipSYCL/librt-backend-cuda.so</span>
<span class="go">[hipSYCL Warning] libcuda.so.1: cannot open shared object file: No such file or directory</span>
<span class="go">Chosen device: hipSYCL OpenMP host device</span>
</pre></div>
</div>
<p>but if we instead run the code on a GPU node (here through an interactive job; remember to ask
for GPU resources on the <code class="docutils literal notranslate"><span class="pre">accel</span></code> partition) we see that the program is actually able to pick up
the GPU device:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[me@login-1.SAGA ~]$ </span>srun<span class="w"> </span>--account<span class="o">=</span>&lt;my-account&gt;<span class="w"> </span>--time<span class="o">=</span><span class="m">0</span>:10:00<span class="w"> </span>--ntasks<span class="o">=</span><span class="m">1</span><span class="w"> </span>--gpus-per-task<span class="o">=</span><span class="m">1</span><span class="w"> </span>--partition<span class="o">=</span>accel<span class="w"> </span>--mem<span class="o">=</span>1G<span class="w"> </span>--pty<span class="w"> </span>bash
<span class="go">srun: job 3511513 queued and waiting for resources</span>
<span class="go">srun: job 3511513 has been allocated resources</span>
<span class="gp">[me@c7-8.SAGA]$ </span>./hello_world
<span class="go">Chosen device: Tesla P100-PCIE-16GB </span>
</pre></div>
</div>
<p>Note that no code is actually executed on the device in this example, since the <code class="docutils literal notranslate"><span class="pre">sycl::queue</span></code>
remains empty, but at least we know that the hardware is visible to our application. Now the
next step will be to add some work that can be offloaded to the device.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2026, Sigma2/NRIS. Text shared under CC-BY 4.0 license.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>