

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SYCL Academy tutorial &mdash; Sigma2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../../_static/nris.css?v=69e7a171" />
      <link rel="stylesheet" type="text/css" href="../../_static/universal-navbar.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/statuspal.css" />

  
    <link rel="shortcut icon" href="../../_static/nris.ico"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script async="async" src="https://siteimproveanalytics.com/js/siteanalyze_6036825.js"></script>
      <script src="../../_static/design-tabs.js?v=f930bc37"></script>
      <script src="../../_static/statuspal_widget.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">
<!-- Send url to parent when displayed as iframe -->
<script>
    const valid_orign_url = "https://www.sigma2.no"
    window.addEventListener('message', function(event) {
        if (event.data === 'getDocumentationIframeUrl' && event.origin.startsWith(valid_orign_url)) {
            // path only (/path/example.html)
            const path = window.location.pathname
            // query string (including the initial ? symbol)
            const search = window.location.search
            // Returns the hash (including the initial # symbol)
            const hash = window.location.hash
            const newUrl = path + search + hash;
            event.source.postMessage(newUrl, event.origin)
        }
    })

</script>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Sigma2/NRIS documentation
              <img src="../../_static/NRIS Logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Policies</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../code-of-conduct.html">Code of Conduct</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting help</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/support_line.html">Getting help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/extended_support.html">Extended support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/faq.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/how_to_write_good_support_requests.html">Writing good support requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/qa-sessions.html">Open Question &amp; Answer Sessions for All Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/lost_forgotten_password.html">Lost, expiring or changing passwords</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/two_factor_authentication.html">One-time-pad (OTP) / Two-factor authentication</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.sigma2.no/project-leader-handbook">Project Leader Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Training</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../training/events.html">Training events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training/notes_qa.html">Questions, Answers and Feedbacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training/past_training.html">An overview over training events in the past</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training/videos.html">Training Video Archives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training/short_instructions.html">Short Instructions Video Archives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training/material.html">Training materials</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/opslog.html">Status and maintenance of systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/applying_account.html">How do I get an account?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/applying_resources.html">Applying for computing and storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/file_transfer.html">File transfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/editing_files.html">Editing files</a></li>
<li class="toctree-l1"><a class="reference internal" href="vs_code/connect_to_server.html">Connecting to a system with Visual Studio Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/ssh.html">SSH</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/ssh.html#common-ssh-errors">Common SSH errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/ood.html">Open OnDemand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/R.html">First R calculation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Files, storage and backup</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/nird_lmd.html">NIRD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/clusters.html">Storage areas on HPC clusters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/quota.html">Storage quota</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/backup.html">Backup on Betzy, Fram, Saga, and NIRD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/sharing_files.html">Data handling and storage policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/performance.html">Optimizing storage performance</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">HPC usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/migration2metacenter.html">Migration to an NRIS HPC machine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../computing/responsible-use.html">Using shared resources responsibly</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jobs/overview.html">Running jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jobs/internet-login-compute-nodes.html">Login nodes:</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jobs/internet-login-compute-nodes.html#compute-nodes">Compute nodes:</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../computing/tuning-applications.html">Tuning applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides_llm.html">Running LLM Models in a Cluster Environment</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Compute resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/hardware_overview.html">Overview over our machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/betzy.html">Betzy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/fram.html">Fram</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/olivia.html">Olivia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/saga.html">Saga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/lumi.html">LUMI</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../software/modulescheme.html">Software module scheme</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/installed_software.html">Installed software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/userinstallsw.html">Installing software as user</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/appguides.html">Application guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/licenses.html">Licence and access policies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/eessi.html">EESSI</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Additional services</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../nird_archive/sandbox-user-guide.html">NIRD Research Data Archive Sandbox (NIRD RDA sandbox)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nird_archive/user-guide.html">NIRD Research Data Archive (NIRD RDA)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nird_toolkit/overview.html">NIRD Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nird_service_platform/overview_nird_service_platform.html">NIRD Service Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../services/easydmp-user-documentation.html">EasyDMP User Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/course_resources.html">CRaaS - Course Resources as a Service</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Code development and tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Code development and tutorials</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Sigma2/NRIS documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">SYCL Academy tutorial</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="sycl-academy-tutorial">
<h1>SYCL Academy tutorial<a class="headerlink" href="#sycl-academy-tutorial" title="Link to this heading"></a></h1>
<p>Codeplay provides a nice introductory tutorial of the basic features of SYCL in their
<a class="reference external" href="https://github.com/codeplaysoftware/syclacademy">SYCL Academy</a>
repository. This is the course material for the standard SYCL tutorial given by Codeplay on relevant
conferences and workshops throughout the year. In the following we will demonstrate how to compile
and run the example code on Saga.</p>
<section id="step-1-load-necessary-modules">
<h2>Step 1: Load necessary modules<a class="headerlink" href="#step-1-load-necessary-modules" title="Link to this heading"></a></h2>
<p>In order to compile the examples we will need CMake as well as a SYCL implementation that is compatible
with the Nvidia GPUs that we have available. On Saga we have hipSYCL and CMake installed globally, and
we will choose a CMake version that is compatible with the GCC toolchain that the hipSYCL module is
based upon, in this case <code class="docutils literal notranslate"><span class="pre">GCCcore/11.2.0</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[me@login-1.SAGA ~]$ </span>module<span class="w"> </span>load<span class="w"> </span>hipSYCL/0.9.2-GCC-11.2.0-CUDA-11.4.1
<span class="gp">[me@login-1.SAGA ~]$ </span>module<span class="w"> </span>load<span class="w"> </span>CMake/3.21.1-GCCcore-11.2.0
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some of the examples in this tutorial does not compile with the 0.9.1 version of <code class="docutils literal notranslate"><span class="pre">hipSYCL</span></code>,
so make sure to use at least version number 0.9.2.</p>
</div>
</section>
<section id="step-2-download-course-material">
<h2>Step 2: Download course material<a class="headerlink" href="#step-2-download-course-material" title="Link to this heading"></a></h2>
<p>The course material can be downloaded from Github with the following command (remember the <code class="docutils literal notranslate"><span class="pre">--recursive</span></code> option):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[me@login-1.SAGA ~]$ </span>git<span class="w"> </span>clone<span class="w"> </span>--recursive<span class="w"> </span>https://github.com/codeplaysoftware/syclacademy.git
<span class="gp">[me@login-1.SAGA ~]$ </span><span class="nb">cd</span><span class="w"> </span>syclacademy
<span class="gp">[me@login-1.SAGA ~/syclacademy]$ </span>ls
<span class="go">CMakeLists.txt  CODE_OF_CONDUCT.md  External          LICENSE.md  sycl_academy.png</span>
<span class="go">Code_Exercises  CONTRIBUTING        Lesson_Materials  README.md   Utilities</span>
</pre></div>
</div>
<p>You will here find <code class="docutils literal notranslate"><span class="pre">Lesson_Materials</span></code> in the form of html slides which you can view in your browser
(best done on your local machine), as well as corresponding <code class="docutils literal notranslate"><span class="pre">Code_Exercises</span></code> for each of the lectures.
You can also follow the exercises by browsing the
<a class="reference external" href="https://github.com/codeplaysoftware/syclacademy/tree/main/Code_Exercises">Github page</a>,
where you will find explanation of the exercises in the <code class="docutils literal notranslate"><span class="pre">doc.md</span></code> file of each folder.</p>
</section>
<section id="step-3-configure-with-cmake">
<h2>Step 3: Configure with CMake<a class="headerlink" href="#step-3-configure-with-cmake" title="Link to this heading"></a></h2>
<p>When we configure the build we need to tell CMake which SYCL implementation we are going to use (hipSYCL)
and which target architecture we want to compile for; <code class="docutils literal notranslate"><span class="pre">omp</span></code> for CPU targets and <code class="docutils literal notranslate"><span class="pre">cuda:sm_60</span></code> for the
Nvidia P100 GPUs we have on Saga (<code class="docutils literal notranslate"><span class="pre">cuda:sm_80</span></code> for the A100 cards on Betzy):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[me@login-1.SAGA ~/syclacademy]$ </span>mkdir<span class="w"> </span>build
<span class="gp">[me@login-1.SAGA ~/syclacademy]$ </span><span class="nb">cd</span><span class="w"> </span>build
<span class="gp">[me@login-1.SAGA ~/syclacademy/build]$ </span>cmake<span class="w"> </span>-DSYCL_ACADEMY_USE_HIPSYCL<span class="o">=</span>ON<span class="w"> </span>-DHIPSYCL_TARGETS<span class="o">=</span><span class="s2">&quot;omp;cuda:sm_60&quot;</span><span class="w"> </span>..
</pre></div>
</div>
<p>Hopefully no error occurred on this step.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you got a <code class="docutils literal notranslate"><span class="pre">syclacademy/External/Catch2</span> <span class="pre">does</span> <span class="pre">not</span> <span class="pre">contain</span> <span class="pre">a</span> <span class="pre">CMakeLists.txt</span> <span class="pre">file</span></code> error you may
have forgotten to download the submodules of the git repo (<code class="docutils literal notranslate"><span class="pre">--recursive</span></code> option in the clone).</p>
</div>
</section>
<section id="step-4-compile-and-run-exercises">
<h2>Step 4: Compile and run exercises<a class="headerlink" href="#step-4-compile-and-run-exercises" title="Link to this heading"></a></h2>
<p>The tutorial is organized such that you are expected to write your solution code in the <code class="docutils literal notranslate"><span class="pre">source.cpp</span></code> file
of each exercise in the <code class="docutils literal notranslate"><span class="pre">Code_Exercises</span></code> folder based on the text given in the corresponding <code class="docutils literal notranslate"><span class="pre">doc.md</span></code> file.
You can then compile your source file for exercise 1 with the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[me@login-1.SAGA ~/syclacademy/build]$ </span>make<span class="w"> </span>exercise_01_compiling_with_sycl_source
</pre></div>
</div>
<p>after which the resulting executable (with the same long and cumbersome name as the build target) can be found under:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[me@login-1.SAGA ~/syclacademy/build]$ </span>ls<span class="w"> </span>Code_Exercises/Exercise_01_Compiling_with_SYCL/
<span class="go">CMakeFiles           CTestTestfile.cmake                     Makefile</span>
<span class="go">cmake_install.cmake  exercise_01_compiling_with_sycl_source</span>
</pre></div>
</div>
<p>and you can execute you program with</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[me@login-1.SAGA ~/syclacademy/build]$ </span>Code_Exercises/Exercise_01_Compiling_with_SYCL/exercise_01_compiling_with_sycl_source
<span class="go">===============================================================================</span>
<span class="go">All tests passed (1 assertion in 1 test case)</span>
</pre></div>
</div>
<p>If it shows that the test passes it means that your code did not crash, which is good news.</p>
</section>
<section id="step-5-compile-and-run-solutions">
<h2>Step 5: Compile and run solutions<a class="headerlink" href="#step-5-compile-and-run-solutions" title="Link to this heading"></a></h2>
<p>If you get stuck at some point there is also a suggested solution to each of the exercises, called <code class="docutils literal notranslate"><span class="pre">solution.cpp</span></code> which you
can compile using the same long and cumbersome exercise name as before, but with <code class="docutils literal notranslate"><span class="pre">_solution</span></code> instead of <code class="docutils literal notranslate"><span class="pre">_source</span></code> in the end</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[me@login-1.SAGA ~/syclacademy/build]$ </span>make<span class="w"> </span>exercise_01_compiling_with_sycl_solution
<span class="gp">[me@login-1.SAGA ~/syclacademy/build]$ </span>Code_Exercises/Exercise_01_Compiling_with_SYCL/exercise_01_compiling_with_sycl_solution
<span class="go">===============================================================================</span>
<span class="go">All tests passed (1 assertion in 1 test case)</span>
</pre></div>
</div>
</section>
<section id="step-6-run-exercises-on-gpu-nodes">
<h2>Step 6: Run exercises on GPU nodes<a class="headerlink" href="#step-6-run-exercises-on-gpu-nodes" title="Link to this heading"></a></h2>
<p>The main point of all these exercises is of course to run the code on accelerators, and in order to do that
you need to ask for GPU resources through Slurm, here as an interactive job on the <code class="docutils literal notranslate"><span class="pre">accel</span></code> partition:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[me@login-1.SAGA ~/syclacademy/build]$ </span>salloc<span class="w"> </span>--account<span class="o">=</span>&lt;my-account&gt;<span class="w"> </span>--time<span class="o">=</span><span class="m">1</span>:00:00<span class="w"> </span>--ntasks<span class="o">=</span><span class="m">1</span><span class="w"> </span>--gpus<span class="o">=</span><span class="m">1</span><span class="w"> </span>--partition<span class="o">=</span>accel<span class="w"> </span>--mem<span class="o">=</span>1G
<span class="go">salloc: Pending job allocation 5353133</span>
<span class="go">salloc: job 5353133 queued and waiting for resources</span>
<span class="go">salloc: job 5353133 has been allocated resources</span>
<span class="go">salloc: Granted job allocation 5353133</span>
<span class="go">salloc: Waiting for resource configuration</span>
<span class="go">salloc: Nodes c7-8 are ready for job</span>
<span class="gp">[me@c7-8.SAGA ~/syclacademy/build]$ </span>Code_Exercises/Exercise_01_Compiling_with_SYCL/exercise_01_compiling_with_sycl_solution
<span class="go">===============================================================================</span>
<span class="go">All tests passed (1 assertion in 1 test case)</span>
</pre></div>
</div>
<p>The test still passed on the GPU node, yay!</p>
</section>
<section id="step-7-play-with-the-examples">
<h2>Step 7: Play with the examples!<a class="headerlink" href="#step-7-play-with-the-examples" title="Link to this heading"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Sigma2/NRIS. Text shared under CC-BY 4.0 license.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>