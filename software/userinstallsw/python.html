

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installing Python packages as a user &mdash; Sigma2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../../_static/nris.css?v=69e7a171" />
      <link rel="stylesheet" type="text/css" href="../../_static/universal-navbar.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/statuspal.css" />

  
    <link rel="shortcut icon" href="../../_static/nris.ico"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script async="async" src="https://siteimproveanalytics.com/js/siteanalyze_6036825.js"></script>
      <script src="../../_static/design-tabs.js?v=f930bc37"></script>
      <script src="../../_static/statuspal_widget.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Installing software with Conda" href="conda.html" />
    <link rel="prev" title="Installing software with EasyBuild" href="easybuild.html" /> 
</head>

<body class="wy-body-for-nav">
<!-- Send url to parent when displayed as iframe -->
<script>
    const valid_orign_url = "https://www.sigma2.no"
    window.addEventListener('message', function(event) {
        if (event.data === 'getDocumentationIframeUrl' && event.origin.startsWith(valid_orign_url)) {
            // path only (/path/example.html)
            const path = window.location.pathname
            // query string (including the initial ? symbol)
            const search = window.location.search
            // Returns the hash (including the initial # symbol)
            const hash = window.location.hash
            const newUrl = path + search + hash;
            event.source.postMessage(newUrl, event.origin)
        }
    })

</script>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Sigma2/NRIS documentation
              <img src="../../_static/NRIS Logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Policies</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../code-of-conduct.html">Code of Conduct</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting help</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/support_line.html">Getting help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/extended_support.html">Extended support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/faq.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/how_to_write_good_support_requests.html">Writing good support requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/qa-sessions.html">Open Question &amp; Answer Sessions for All Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/lost_forgotten_password.html">Lost, expiring or changing passwords</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/two_factor_authentication.html">One-time-pad (OTP) / Two-factor authentication</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.sigma2.no/project-leader-handbook">Project Leader Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Training</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../training/events.html">Training events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training/notes_qa.html">Questions, Answers and Feedbacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training/past_training.html">An overview over training events in the past</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training/videos.html">Training Video Archives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training/short_instructions.html">Short Instructions Video Archives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training/material.html">Training materials</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/opslog.html">Status and maintenance of systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/applying_account.html">How do I get an account?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/applying_resources.html">Applying for computing and storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/file_transfer.html">File transfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/editing_files.html">Editing files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../code_development/guides/vs_code/connect_to_server.html">Connecting to a system with Visual Studio Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/ssh.html">SSH</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/ssh.html#common-ssh-errors">Common SSH errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/ood.html">Open OnDemand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/R.html">First R calculation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Files, storage and backup</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/nird_lmd.html">NIRD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/clusters.html">Storage areas on HPC clusters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/quota.html">Storage quota</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/backup.html">Backup on Betzy, Fram, Saga, and NIRD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/sharing_files.html">Data handling and storage policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files_storage/performance.html">Optimizing storage performance</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">HPC usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/migration2metacenter.html">Migration to an NRIS HPC machine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../computing/responsible-use.html">Using shared resources responsibly</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jobs/overview.html">Running jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jobs/internet-login-compute-nodes.html">Login nodes:</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jobs/internet-login-compute-nodes.html#compute-nodes">Compute nodes:</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../computing/tuning-applications.html">Tuning applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../code_development/guides_llm.html">Running LLM Models in a Cluster Environment</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Compute resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/hardware_overview.html">Overview over our machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/betzy.html">Betzy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/fram.html">Fram</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/olivia.html">Olivia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/saga.html">Saga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hpc_machines/lumi.html">LUMI</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../modulescheme.html">Software module scheme</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installed_software.html">Installed software</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../userinstallsw.html">Installing software as user</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="easybuild.html">Installing software with EasyBuild</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Installing Python packages as a user</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creating-a-python-virtual-environment">Creating a Python virtual environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="#choosing-a-python-version">Choosing a Python version</a></li>
<li class="toctree-l3"><a class="reference internal" href="#leveraging-the-existing-pool-of-python-packages">Leveraging the existing pool of Python packages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#searching-for-dependencies">Searching for dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="#choosing-a-toolchain">Choosing a toolchain</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#using-the-virtual-environment-in-a-batch-script">Using the virtual environment in a batch script</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sharing-your-python-package-configuration-with-others">Sharing your Python package configuration with others</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="conda.html">Installing software with Conda</a></li>
<li class="toctree-l2"><a class="reference internal" href="R.html">Installing R libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="perl.html">Installing Perl modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="ORCA.html">ORCA (quantum chemistry program)</a></li>
<li class="toctree-l2"><a class="reference internal" href="mathematica.html">How to Run Mathematica on Saga and Fram Using Singularity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../code_development/guides/containers.html">Containers on NRIS HPC systems</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../appguides.html">Application guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../licenses.html">Licence and access policies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../eessi.html">EESSI</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Additional services</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../nird_archive/sandbox-user-guide.html">NIRD Research Data Archive Sandbox (NIRD RDA sandbox)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nird_archive/user-guide.html">NIRD Research Data Archive (NIRD RDA)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nird_toolkit/overview.html">NIRD Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nird_service_platform/overview_nird_service_platform.html">NIRD Service Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../services/easydmp-user-documentation.html">EasyDMP User Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_help/course_resources.html">CRaaS - Course Resources as a Service</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Code development and tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../code_development/overview.html">Code development and tutorials</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Sigma2/NRIS documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../userinstallsw.html">Installing software as user</a></li>
      <li class="breadcrumb-item active">Installing Python packages as a user</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="installing-python-packages-as-a-user">
<span id="installing-python-packages"></span><h1>Installing Python packages as a user<a class="headerlink" href="#installing-python-packages-as-a-user" title="Link to this heading"></a></h1>
<p>The easiest way to install Python packages as a user is to use <code class="docutils literal notranslate"><span class="pre">pip</span></code> inside a virtual environment.
It is advised to use virtual environments since it is a straight forward way to isolate different
installations from each other. This makes it possible to have multiple versions of the same packages
installed in your <code class="docutils literal notranslate"><span class="pre">$HOME</span></code> without problems of conflicting dependencies.</p>
<p><code class="docutils literal notranslate"><span class="pre">pip</span></code> is the main package installer for Python and included in every Python installation. It is easy
to use and can be combined with <code class="docutils literal notranslate"><span class="pre">venv</span></code> to manage independent environments. It is recommended that
you at least have one virtual environment for each disparate experiment.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Key takeaways:</p>
<ul class="simple">
<li><p>Always install packages inside a virtual environment</p></li>
<li><p>Do <strong>not</strong> install packages with <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">--user</span></code>. They will end up in <code class="docutils literal notranslate"><span class="pre">$HOME/.local</span></code> and from
there they will leak into both containers and environments, thus breaking compatibility for other
installations.</p></li>
<li><p>Leverage the existing software stack for dependencies using the option <code class="docutils literal notranslate"><span class="pre">--system-site-packages</span></code></p></li>
<li><p>When loading dependencies from the central software stack, always use the same toolchain (more
info on this further down the text)</p></li>
</ul>
</div>
<section id="creating-a-python-virtual-environment">
<h2>Creating a Python virtual environment<a class="headerlink" href="#creating-a-python-virtual-environment" title="Link to this heading"></a></h2>
<p>In this example we have used <code class="docutils literal notranslate"><span class="pre">venv</span></code> which comes with with the Python standard library. In other
guides/documentation <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code> is used. The first is a subset of the latter and has all the
functionality we need.</p>
<p>First load a Python module with (use <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">avail</span> <span class="pre">Python</span></code> to see all):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>module<span class="w"> </span>load<span class="w"> </span>Python/3.12.3-GCCcore-13.3.0
</pre></div>
</div>
<p>Create a virtual environment in your <code class="docutils literal notranslate"><span class="pre">$HOME</span></code> folder with an appropriate name. A good idea here is to
add a suffix like “-env” to the name as it makes it transparent as to what we are dealing with:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python3<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span><span class="nv">$HOME</span>/pandas-env<span class="w"> </span>--system-site-packages
</pre></div>
</div>
<p>Activate the environment:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">source</span><span class="w"> </span><span class="nv">$HOME</span>/pandas-env/bin/activate
</pre></div>
</div>
<p>Install packages with pip. Here we install the Python package pandas:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp gp-VirtualEnv">(pandas-env)</span><span class="gp">$ </span>python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>pandas
</pre></div>
</div>
<p>You are now ready to use the new environment. When you are done and want to get out of the
environment, you simply type:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>deactivate
</pre></div>
</div>
<p><strong>NB!</strong> Remember that you will always have to load the same module(s) before you activate your environment
next time.</p>
<p>For more information, have a look at the official
<a class="reference external" href="https://pip.pypa.io/en/stable/">pip</a> and
<a class="reference external" href="https://docs.python.org/3/library/venv.html">venv</a> documentations.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When running software from your Python environment in a batch script, it is <em>highly</em> recommended to
activate the environment <em>only</em> in the script (see below), while keeping the login environment clean
when submitting the job, otherwise the environments can interfere with each other (even if they are
the same).</p>
</div>
</section>
<section id="choosing-a-python-version">
<h2>Choosing a Python version<a class="headerlink" href="#choosing-a-python-version" title="Link to this heading"></a></h2>
<p>If you need a specific version of Python for your installation, then you can search and see if that
version is available on our system. This command will give you a list of all Python modules
installed:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>module<span class="w"> </span>avail<span class="w"> </span>python
</pre></div>
</div>
<p>Load the module you need and then create a virtual environment before you start installing packages
inside of it.</p>
</section>
<section id="leveraging-the-existing-pool-of-python-packages">
<h2>Leveraging the existing pool of Python packages<a class="headerlink" href="#leveraging-the-existing-pool-of-python-packages" title="Link to this heading"></a></h2>
<p>The dependencies that are needed to install a certain Python package are usually listed in the
<code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> file. This file is found in the sourcefiles for the package you are interested
in. The dependencies can sometimes be found under the variable <code class="docutils literal notranslate"><span class="pre">install_requires</span></code> of the file
<code class="docutils literal notranslate"><span class="pre">setup.py</span></code> (also found in the sourcefiles).</p>
<p>Since we already have hundreds of Python packages installed (in different versions) on our systems,
you can utilize those when installing the package you need using this small procedure:</p>
<ol class="arabic simple">
<li><p>Search to see if any of your dependencies are available using <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">spider</span></code></p></li>
<li><p>Make sure the modules (which contain your dependencies) are built with the same toolchain (more on
this further down)</p></li>
<li><p>Load all the modules you need (if you do not get an error message, they are compatible)</p></li>
<li><p>Create your virtual environment and install the Python package you need</p></li>
</ol>
<section id="searching-for-dependencies">
<h3>Searching for dependencies<a class="headerlink" href="#searching-for-dependencies" title="Link to this heading"></a></h3>
<p>If you already know some of the Python packages you want to use, you can search for them directly
with the <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">spider</span></code> command. Let us say you want to use the Python package <code class="docutils literal notranslate"><span class="pre">numpy</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>module<span class="w"> </span>spider<span class="w"> </span>numpy

<span class="go">-----------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="go">  numpy:</span>
<span class="go">-----------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="go">     Versions:</span>
<span class="go">        numpy/1.25.1 (E)</span>
<span class="go">        numpy/1.26.2 (E)</span>
<span class="go">        numpy/1.26.4 (E)</span>
</pre></div>
</div>
<p>This will give you a list of all version of <code class="docutils literal notranslate"><span class="pre">numpy</span></code> installed. In order to see what module contains
the version of <code class="docutils literal notranslate"><span class="pre">numpy</span></code> you need, run <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">spider</span></code> again with the version number:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>module<span class="w"> </span>spider<span class="w"> </span>numpy/1.26.4

<span class="go">-----------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="go">  numpy: numpy/1.26.4 (E)</span>
<span class="go">-----------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="go">    This extension is provided by the following modules. To access the extension you must load one of the following modules. Note that any module names in parentheses show the module location in the software hierarchy.</span>

<span class="go">       SciPy-bundle/2024.05-gfbf-2024a</span>
</pre></div>
</div>
<p>In order to see what other Python packages you will get access to when loading this <code class="docutils literal notranslate"><span class="pre">SciPy-bundle</span></code> module, run this command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>module<span class="w"> </span>spider<span class="w"> </span>SciPy-bundle/2024.05-gfbf-2024a
<span class="go">     Included extensions</span>
<span class="go">      ===================</span>
<span class="go">      beniget-0.4.1, Bottleneck-1.3.8, deap-1.4.1, gast-0.5.4, mpmath-1.3.0,</span>
<span class="go">      numexpr-2.10.0, numpy-1.26.4, pandas-2.2.2, ply-3.11, pythran-0.16.1,</span>
<span class="go">      scipy-1.13.1, tzdata-2024.1, versioneer-0.29</span>
</pre></div>
</div>
<p>If you then load the module you can check which version of Python it comes with:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[ec-parosen@login-3 ~]$ </span>module<span class="w"> </span>load<span class="w"> </span>SciPy-bundle/2024.05-gfbf-2024a
<span class="gp">[ec-parosen@login-3 ~]$ </span>which<span class="w"> </span>python3
<span class="go">/cluster/software/EL9/easybuild/software/Python/3.12.3-GCCcore-13.3.0/bin/python3</span>
</pre></div>
</div>
<p>We see here that <code class="docutils literal notranslate"><span class="pre">SciPy-bundle/2024.05-gfbf-2024a</span></code> is built on top of the
<code class="docutils literal notranslate"><span class="pre">Python/3.12.3-GCCcore-13.3.0</span></code> module. You only need to load the first since the latter is a
dependecy and will be loaded automatically.</p>
</section>
<section id="choosing-a-toolchain">
<h3>Choosing a toolchain<a class="headerlink" href="#choosing-a-toolchain" title="Link to this heading"></a></h3>
<p>All modules on our systems are built using a compiler (C/C++/Fortran) and a few different common
libraries (OpenMPI, OpenBLAS, FFTW etc). Together they form something called a toolchain and the
most common one is the <code class="docutils literal notranslate"><span class="pre">foss</span></code> (Free and Open Source Software) toolchain. As newer version of said
tools are released, a new toolchain version is also released (usually twice a year).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want to combine several different modules that contain the Python packages you need, they
all need to come from the same <strong>toolchain</strong>. For example, you load modules either from the
<code class="docutils literal notranslate"><span class="pre">foss/2023a</span></code> toolchain or the <code class="docutils literal notranslate"><span class="pre">foss/2022b</span></code> toolchain. Note that <code class="docutils literal notranslate"><span class="pre">GCCcore-12.3.0</span></code> is a subtoolchain
of <code class="docutils literal notranslate"><span class="pre">foss/2023a</span></code> and modules with either one of these postfixes are thus comptatible. Here is a list
of all installed foss toolchains and the GCC versions included in them:</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">foss</span><span class="o">/</span><span class="mi">2021</span><span class="n">a</span> <span class="o">-&gt;</span> <span class="mf">10.3.0</span>
<span class="n">foss</span><span class="o">/</span><span class="mi">2021</span><span class="n">b</span> <span class="o">-&gt;</span> <span class="mf">11.2.0</span>
<span class="n">foss</span><span class="o">/</span><span class="mi">2022</span><span class="n">a</span> <span class="o">-&gt;</span> <span class="mf">11.3.0</span>
<span class="n">foss</span><span class="o">/</span><span class="mi">2022</span><span class="n">b</span> <span class="o">-&gt;</span> <span class="mf">12.2.0</span>
<span class="n">foss</span><span class="o">/</span><span class="mi">2023</span><span class="n">a</span> <span class="o">-&gt;</span> <span class="mf">12.3.0</span>
<span class="n">foss</span><span class="o">/</span><span class="mi">2023</span><span class="n">b</span> <span class="o">-&gt;</span> <span class="mf">13.2.0</span>
<span class="n">foss</span><span class="o">/</span><span class="mi">2024</span><span class="n">a</span> <span class="o">-&gt;</span> <span class="mf">13.3.0</span>
</pre></div>
</div>
<p>You can read more about toolchains in the official
<a class="reference external" href="https://docs.easybuild.io/common-toolchains/?#common_toolchains_foss">EasyBuild</a> documentation.</p>
</section>
</section>
<section id="using-the-virtual-environment-in-a-batch-script">
<h2>Using the virtual environment in a batch script<a class="headerlink" href="#using-the-virtual-environment-in-a-batch-script" title="Link to this heading"></a></h2>
<p>In a batch script you will activate the virtual environment in the same way as
above. You must just load the python module first:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Set up job environment
set -o errexit # exit on any error
set -o nounset # treat unset variables as error

# Load modules
module load Python/Python/3.12.3-GCCcore-13.3.0

# Set the ${PS1} (needed in the source of the virtual environment for some Python versions)
export PS1=\$

# activate the virtual environment
source $HOME/my_new_pythonenv/bin/activate

# execute example script
python pdexample.py
</pre></div>
</div>
</section>
<section id="sharing-your-python-package-configuration-with-others">
<h2>Sharing your Python package configuration with others<a class="headerlink" href="#sharing-your-python-package-configuration-with-others" title="Link to this heading"></a></h2>
<p>To allow other researchers to replicate your virtual environment setup it can be
a good idea to “freeze” your packages. This tells <code class="docutils literal notranslate"><span class="pre">pip</span></code> that it should not
silently upgrade packages and also gives a good way to share the exact same
packages between researchers.</p>
<p>To freeze the packages into a list to share with others run:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>list<span class="w"> </span>--format<span class="w"> </span>freeze<span class="w"> </span>&gt;<span class="w"> </span>requirements.txt
</pre></div>
</div>
<p>The file <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> will now contain the list of packages installed in
your virtual environment with their exact versions. When publishing your
experiments it can be a good idea to share this file which other can install in
their own virtual environments like so:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</pre></div>
</div>
<p>Your virtual environment and the new one installed from the same
<code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> should now be identical and thus should replicate the
experiment setup as closely as possible.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="easybuild.html" class="btn btn-neutral float-left" title="Installing software with EasyBuild" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="conda.html" class="btn btn-neutral float-right" title="Installing software with Conda" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Sigma2/NRIS. Text shared under CC-BY 4.0 license.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>